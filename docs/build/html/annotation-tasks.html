

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tasks &mdash; ansible-role-freebsd-poudriere 1.4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="ansible-role-freebsd-poudriere 1.4.0 documentation" href="index.html"/>
        <link rel="up" title="Annotated source code" href="annotation.html"/>
        <link rel="next" title="Handlers" href="annotation-handlers.html"/>
        <link rel="prev" title="Annotated source code" href="annotation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ansible-role-freebsd-poudriere
          

          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="qsg.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">User’s guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="annotation.html">Annotated source code</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-yml">main.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debug-yml">debug.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packages-yml">packages.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cert-yml">cert.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conf-yml">conf.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pkglist-yml">pkglist.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-yml">make.yml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="annotation-handlers.html">Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotation-templates.html">Templates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="legalnotice.html">Legal Notice</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ansible-role-freebsd-poudriere</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="annotation.html">Annotated source code</a> &raquo;</li>
        
      <li>Tasks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/annotation-tasks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tasks">
<h1>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h1>
<div class="section" id="main-yml">
<span id="as-main-yml"></span><h2>main.yml<a class="headerlink" href="#main-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Main task.</p>
<p>Import tasks if enabled.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/main.yml">tasks/main.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll"><span class="c1"># tasks freebsd_poudriere</span>
</span>
<span class="p p-Indicator">-</span> <span class="nt">import_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">debug.yml</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_debug|bool</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">poudriere_debug</span><span class="p p-Indicator">,</span> <span class="nv">always</span><span class="p p-Indicator">]</span>

<span class="p p-Indicator">-</span> <span class="nt">import_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">packages.yml</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_install|bool</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_packages</span>

<span class="p p-Indicator">-</span> <span class="nt">import_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cert.yml</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert</span>

<span class="p p-Indicator">-</span> <span class="nt">import_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">conf.yml</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_conf</span>

<span class="p p-Indicator">-</span> <span class="nt">import_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">make.yml</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_make</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="debug-yml">
<span id="as-debug-yml"></span><h2>debug.yml<a class="headerlink" href="#debug-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure debug.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/debug.yml">tasks/debug.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Poudriere</span><span class="nv"> </span><span class="s">Debug&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="p p-Indicator">|</span>
         <span class="no">ansible_architecture [{{ ansible_architecture }}]</span>
         <span class="no">ansible_os_family [{{ ansible_os_family }}]</span>
         <span class="no">ansible_distribution [{{ ansible_distribution }}]</span>
         <span class="no">ansible_distribution_major_version [{{ ansible_distribution_major_version }}]</span>
         <span class="no">ansible_distribution_version [{{ ansible_distribution_version }}]</span>
         <span class="no">ansible_distribution_release [{{ ansible_distribution_release }}]</span>
         <span class="no">ansible_python_version [{{ ansible_python_version }}]</span>

         <span class="no">freebsd_install_method [{{ freebsd_install_method }}]</span>
         <span class="no">freebsd_use_packages [{{ freebsd_use_packages }}]</span>
         <span class="no">freebsd_install_retries [{{ freebsd_install_retries }}]</span>
         <span class="no">freebsd_install_delay [{{ freebsd_install_delay }}]</span>
         <span class="no">poudriere_install [{{ poudriere_install }}]</span>

         <span class="no">poudriere_packages</span>
         <span class="no">{{ poudriere_packages|to_nice_yaml }}</span>
         <span class="no">poudriere_packages_cert</span>
         <span class="no">{{ poudriere_packages_cert|to_nice_yaml }}</span>
         <span class="no">poudriere_pkg_arch {{ poudriere_pkg_arch|to_yaml }}</span>
         <span class="no">poudriere_backup_conf [{{ poudriere_backup_conf|bool }}]</span>
         <span class="no">poudriere_owner [{{ poudriere_owner }}]</span>
         <span class="no">poudriere_group [{{ poudriere_group }}]</span>
         <span class="no">poudriere_mode [{{ poudriere_mode }}]</span>
         <span class="no">poudriere_mode_dir [{{ poudriere_mode_dir }}]</span>
         <span class="no">poudriere_ssl_dir [{{ poudriere_ssl_dir }}]</span>
         <span class="no">poudriere_ssl_dir_mode [{{ poudriere_ssl_dir_mode }}]</span>
         <span class="no">poudriere_ssl_private_dir_mode [{{ poudriere_ssl_private_dir_mode }}]</span>
         <span class="no">poudriere_ssl_private_key_mode [{{ poudriere_ssl_private_key_mode }}]</span>
         <span class="no">poudriere_cert_create [{{ poudriere_cert_create }}]</span>
         <span class="no">poudriere_cert_CN [{{ poudriere_cert_CN }}]</span>
         <span class="no">poudriere_cert_path [{{ poudriere_cert_path }}]</span>
         <span class="no">poudriere_conf [{{ poudriere_conf }}]</span>
         <span class="no">poudriere_conf_dir [{{ poudriere_conf_dir }}]</span>
         <span class="no">poudriere_conf_NO_ZFS [{{ poudriere_conf_NO_ZFS }}]</span>
         <span class="no">poudriere_conf_ZROOTFS [{{ poudriere_conf_ZROOTFS }}]</span>
         <span class="no">poudriere_conf_FREEBSD_HOST [{{ poudriere_conf_FREEBSD_HOST }}]</span>
         <span class="no">poudriere_conf_RESOLV_CONF [{{ poudriere_conf_RESOLV_CONF }}]</span>
         <span class="no">poudriere_conf_BASEFS [{{ poudriere_conf_BASEFS }}]</span>
         <span class="no">poudriere_conf_POUDRIERE_DATA [{{ poudriere_conf_POUDRIERE_DATA }}]</span>
         <span class="no">poudriere_conf_USE_PORTLINT [{{ poudriere_conf_USE_PORTLINT }}]</span>
         <span class="no">poudriere_conf_USE_TMPFS [{{ poudriere_conf_USE_TMPFS }}]</span>
         <span class="no">poudriere_conf_DISTFILES_CACHE [{{ poudriere_conf_DISTFILES_CACHE }}]</span>
         <span class="no">poudriere_conf_PKG_REPO_SIGNING_KEY [{{ poudriere_conf_PKG_REPO_SIGNING_KEY }}]</span>
         <span class="no">poudriere_conf_URL_BASE [{{ poudriere_conf_URL_BASE }}]</span>
         <span class="no">poudriere_conf_CHECK_CHANGED_OPTIONS [{{ poudriere_conf_CHECK_CHANGED_OPTIONS }}]</span>
         <span class="no">poudriere_conf_CHECK_CHANGED_DEPS [{{ poudriere_conf_CHECK_CHANGED_DEPS }}]</span>
         <span class="no">poudriere_make_conf</span>
         <span class="no">{{ poudriere_make_conf|to_nice_yaml }}</span>
         <span class="no">poudriere_pkglist_dir [{{ poudriere_pkglist_dir }}]</span>

         <span class="no">apache_version [{{ apache_version }}]</span>
         <span class="no">apache_php_version [{{ apache_php_version }}]</span>
         <span class="no">bsd_php_version [{{ bsd_php_version }}]</span>
         <span class="no">bsd_dhcp_version [{{ bsd_dhcp_version }}]</span>
         <span class="no">bsd_bind_version [{{ bsd_bind_version }}]</span>
         <span class="no">bsd_mysql_version [{{ bsd_mysql_version }}]</span>
         <span class="no">bsd_python_version [{{ bsd_python_version }}]</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">msg.split(&#39;\n&#39;)[:-1]</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="packages-yml">
<span id="as-packages-yml"></span><h2>packages.yml<a class="headerlink" href="#packages-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure packages.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/packages.yml">tasks/packages.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;packages:</span><span class="nv"> </span><span class="s">Install</span><span class="nv"> </span><span class="s">poudriere</span><span class="nv"> </span><span class="s">packages&quot;</span>
  <span class="nt">pkgng</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_packages</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="nt">retries</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_retries</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">until</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result is succeeded</span>
  <span class="nt">delay</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_delay</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">freebsd_install_method == &quot;packages&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;packages:</span><span class="nv"> </span><span class="s">Install</span><span class="nv"> </span><span class="s">poudriere</span><span class="nv"> </span><span class="s">ports&quot;</span>
  <span class="nt">portinstall</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">use_packages</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_use_packages</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_packages</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="nt">retries</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_retries</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">until</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result is succeeded</span>
  <span class="nt">delay</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_delay</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">freebsd_install_method == &quot;ports&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;packages:</span><span class="nv"> </span><span class="s">Install</span><span class="nv"> </span><span class="s">packages</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">create</span><span class="nv"> </span><span class="s">certificate&quot;</span>
  <span class="nt">pkgng</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_packages_cert</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="nt">retries</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_retries</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">until</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result is succeeded</span>
  <span class="nt">delay</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_delay</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert_create|bool</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">freebsd_install_method == &quot;packages&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;packages:</span><span class="nv"> </span><span class="s">Install</span><span class="nv"> </span><span class="s">ports</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">create</span><span class="nv"> </span><span class="s">certificate&quot;</span>
  <span class="nt">portinstall</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">use_packages</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_use_packages</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_packages_cert</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="nt">retries</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_retries</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">until</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result is succeeded</span>
  <span class="nt">delay</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">freebsd_install_delay</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert_create|bool</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">freebsd_install_method == &quot;ports&quot;</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="cert-yml">
<span id="as-cert-yml"></span><h2>cert.yml<a class="headerlink" href="#cert-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure cert.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/cert.yml">tasks/cert.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_ssl_dirs</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/crt&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/crt&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_ssl_dirs</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/csr&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/csr&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_ssl_dirs</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/private&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/private&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_private_dir_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_ssl_dirs</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Generate</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">OpenSSL</span><span class="nv"> </span><span class="s">private</span><span class="nv"> </span><span class="s">key</span><span class="nv"> </span><span class="s">(default</span><span class="nv"> </span><span class="s">4096</span><span class="nv"> </span><span class="s">bits,</span><span class="nv"> </span><span class="s">RSA)&quot;</span>
  <span class="nt">openssl_privatekey</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf_PKG_REPO_SIGNING_KEY</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_private_key_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert_create|bool</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">not ansible_check_mode</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_crt</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Generate</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">OpenSSL</span><span class="nv"> </span><span class="s">Certificate</span><span class="nv"> </span><span class="s">Signing</span><span class="nv"> </span><span class="s">Request&quot;</span>
  <span class="nt">openssl_csr</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/csr/poudriere.csr&quot;</span>
    <span class="nt">privatekey_path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf_PKG_REPO_SIGNING_KEY</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">common_name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_cert_CN</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert_create|bool</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">not ansible_check_mode</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_crt</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;cert:</span><span class="nv"> </span><span class="s">Generate</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">Self</span><span class="nv"> </span><span class="s">Signed</span><span class="nv"> </span><span class="s">OpenSSL</span><span class="nv"> </span><span class="s">certificate&quot;</span>
  <span class="nt">openssl_certificate</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_cert_path</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">privatekey_path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf_PKG_REPO_SIGNING_KEY</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">csr_path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_ssl_dir</span><span class="nv"> </span><span class="s">}}/csr/poudriere.csr&quot;</span>
    <span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">selfsigned</span>
  <span class="nt">when</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_cert_create|bool</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">not ansible_check_mode</span>
  <span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_crt</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="conf-yml">
<span id="as-conf-yml"></span><h2>conf.yml<a class="headerlink" href="#conf-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure conf.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/conf.yml">tasks/conf.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Configure</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_conf</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;poudriere.conf.j2&quot;</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">backup</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_backup_conf|bool</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_conf_DISTFILES_CACHE</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf_DISTFILES_CACHE</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">packages&quot;</span>
  <span class="nt">include_tasks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pkglist.yml</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop_control</span><span class="p">:</span>
    <span class="nt">loop_var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pkg_arch</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="pkglist-yml">
<span id="as-pkglist-yml"></span><h2>pkglist.yml<a class="headerlink" href="#pkglist-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure pkglist.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/pkglist.yml">tasks/pkglist.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="c1"># Enable or disable dictionaries in the list _pkg_dict</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">_pkg_dict&quot;</span>
  <span class="nt">set_fact</span><span class="p">:</span>
    <span class="nt">_pkg_dict</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkg_dict|default([])</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">[item|combine({&#39;enable&#39;:</span><span class="nv"> </span><span class="s">_combine_enable})]</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;vars&#39;,</span><span class="nv"> </span><span class="s">&#39;pkg_dict_&#39;</span><span class="nv"> </span><span class="s">~</span><span class="nv"> </span><span class="s">pkg_arch)</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">_pkglist_enable</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;vars&#39;,</span><span class="nv"> </span><span class="s">&#39;pkglist_enable_&#39;</span><span class="nv"> </span><span class="s">~</span><span class="nv"> </span><span class="s">pkg_arch,</span><span class="nv"> </span><span class="s">default={})</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">_current_enable</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.enable|default(true)</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">_combine_enable</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkglist_enable[item.pkglist]|default(_current_enable)</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Debug</span><span class="nv"> </span><span class="s">_pkg_dict&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">_pkg_dict</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">poudriere_debug|bool</span>

<span class="c1"># Create directories</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">directories</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">directory</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode_dir</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}.disabled&quot;</span>

<span class="c1"># Disabled lists of packages</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Remove</span><span class="nv"> </span><span class="s">lists</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">packages</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkg_dict</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop_control</span><span class="p">:</span>
    <span class="nt">label</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">not item.enable</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">lists</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">packages</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}.disabled&quot;</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;poudriere.pkglist.j2&quot;</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}.disabled/{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">backup</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_backup_conf|bool</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkg_dict</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop_control</span><span class="p">:</span>
    <span class="nt">label</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">not item.enable</span>

<span class="c1"># Enabled lists of packages</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Remove</span><span class="nv"> </span><span class="s">lists</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">packages</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}.disabled&quot;</span>
  <span class="nt">file</span><span class="p">:</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
    <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}.disabled/{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkg_dict</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop_control</span><span class="p">:</span>
    <span class="nt">label</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item.enable</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;conf:</span><span class="nv"> </span><span class="s">Create</span><span class="nv"> </span><span class="s">lists</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">packages</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;poudriere.pkglist.j2&quot;</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_pkglist_dir</span><span class="nv"> </span><span class="s">}}_{{</span><span class="nv"> </span><span class="s">pkg_arch</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">backup</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_backup_conf|bool</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">_pkg_dict</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">loop_control</span><span class="p">:</span>
    <span class="nt">label</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.pkglist</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="nt">when</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item.enable</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="make-yml">
<span id="as-make-yml"></span><h2>make.yml<a class="headerlink" href="#make-yml" title="Permalink to this headline">¶</a></h2>
<p>Synopsis: Configure make.</p>
<p>Description of the task.</p>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-freebsd-poudriere/blob/master/tasks/make.yml">tasks/make.yml</a>]</p>
<div class="highlight-Yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll"><span class="nn">---</span>
</span><span class="hll">
</span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;make:</span><span class="nv"> </span><span class="s">Configure</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">poudriere_conf_dir</span><span class="nv"> </span><span class="s">}}/make.conf&quot;</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">src</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">make.conf.j2</span>
    <span class="nt">dest</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_conf_dir</span><span class="nv"> </span><span class="s">}}/make.conf&quot;</span>
    <span class="nt">owner</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_owner</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">group</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_group</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">mode</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_mode</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">backup</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">poudriere_backup_conf|bool</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="c1"># See 10.5.10. Providing a Custom make.conf File</span>
<span class="c1"># https://docs.freebsd.org/en/books/porters-handbook/testing-poudriere.html</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="annotation-handlers.html" class="btn btn-neutral float-right" title="Handlers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="annotation.html" class="btn btn-neutral" title="Annotated source code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> 2022, Vladimir Botka.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.4.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>