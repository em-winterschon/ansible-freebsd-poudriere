---
# defaults freebsd_poudriere

poudriere_install: true
poudriere_debug: false
poudriere_backup_conf: true

freebsd_install_method: packages
# freebsd_install_method: ports
freebsd_use_packages: true
freebsd_install_retries: 10
freebsd_install_delay: 5

# packages
poudriere_packages:
  - ports-mgmt/poudriere
  - ports-mgmt/portmaster
  - devel/ccache
poudriere_packages_cert:
  - security/py-openssl
  - security/py-acme-tiny

# owner, group, mode
poudriere_owner: root
poudriere_group: wheel
poudriere_mode: "0644"
poudriere_mode_dir: "0755"

# certificate
poudriere_cert: false
poudriere_ssl_dir: /usr/local/etc/ssl
poudriere_ssl_dir_mode: "0755"
poudriere_ssl_private_dir_mode: "0700"
poudriere_ssl_private_key_mode: "0600"
poudriere_cert_CN: builder.example.com
poudriere_csr_path: "{{ poudriere_ssl_dir }}/csr/poudriere.csr"
poudriere_cert_path: "{{ poudriere_ssl_dir }}/crt/poudriere.crt"
poudriere_cert_dirs:
  - dir: "{{ poudriere_ssl_dir }}"
    owner: "{{ poudriere_owner }}"
    group: "{{ poudriere_group }}"
    mode: "{{ poudriere_ssl_dir_mode }}"
  - dir: "{{ poudriere_ssl_dir }}/crt"
    owner: "{{ poudriere_owner }}"
    group: "{{ poudriere_group }}"
    mode: "{{ poudriere_ssl_dir_mode }}"
  - dir: "{{ poudriere_ssl_dir }}/csr"
    owner: "{{ poudriere_owner }}"
    group: "{{ poudriere_group }}"
    mode: "{{ poudriere_ssl_dir_mode }}"
  - dir: "{{ poudriere_ssl_dir }}/private"
    owner: "{{ poudriere_owner }}"
    group: "{{ poudriere_group }}"
    mode: "{{ poudriere_ssl_private_dir_mode }}"

# configuration
# (see /usr/local/etc/poudriere.conf.sample)
poudriere_conf: true
poudriere_conf_file: /usr/local/etc/poudriere.conf
poudriere_conf_template: poudriere.conf.j2
poudriere_conf_dir: /usr/local/etc/poudriere.d
poudriere_conf_dirs:
  - dir: "{{ poudriere_conf_DISTFILES_CACHE }}"
    owner: "{{ poudriere_owner }}"
    group: "{{ poudriere_group }}"
    mode: "{{ poudriere_mode_dir }}"
poudriere_conf_ZPOOL: zroot
poudriere_conf_NO_ZFS: "yes"
poudriere_conf_ZROOTFS: /poudriere
poudriere_conf_FREEBSD_HOST: https://download.freebsd.org  # Note 1)
poudriere_conf_RESOLV_CONF: /etc/resolv.conf
poudriere_conf_BASEFS: /usr/local/poudriere
poudriere_conf_SVN_HOST: svn.FreeBSD.org  # Note 2)
poudriere_conf_POUDRIERE_DATA: "{{ poudriere_conf_BASEFS }}/data"
poudriere_conf_USE_PORTLINT: "no"
poudriere_conf_USE_TMPFS: "yes"
poudriere_conf_DISTFILES_CACHE: /usr/ports/distfiles
poudriere_conf_PKG_REPO_SIGNING_KEY: "{{ poudriere_ssl_dir }}/private/poudriere.pem"
poudriere_conf_URL_BASE: "http://{{ ansible_default_ipv4.address|default('127.0.0.1') }}/"
poudriere_conf_CHECK_CHANGED_OPTIONS: verbose
poudriere_conf_CHECK_CHANGED_DEPS: "yes"
poudriere_conf_data:  # See templates/poudriere.conf2.j2
  ZPOOL: "{{ poudriere_conf_ZPOOL }}"
  NO_ZFS: "{{ poudriere_conf_NO_ZFS }}"
  ZROOTFS: "{{ poudriere_conf_ZROOTFS }}"
  FREEBSD_HOST: "{{ poudriere_conf_FREEBSD_HOST }}"
  RESOLV_CONF: "{{ poudriere_conf_RESOLV_CONF }}"
  BASEFS: "{{ poudriere_conf_BASEFS }}"
  SVN_HOST: "{{ poudriere_conf_SVN_HOST }}"
  POUDRIERE_DATA: "{{ poudriere_conf_POUDRIERE_DATA }}"
  USE_PORTLINT: "{{ poudriere_conf_USE_PORTLINT }}"
  USE_TMPFS: "{{ poudriere_conf_USE_TMPFS }}"
  DISTFILES_CACHE: "{{ poudriere_conf_DISTFILES_CACHE }}"
  PKG_REPO_SIGNING_KEY: "{{ poudriere_conf_PKG_REPO_SIGNING_KEY }}"
  URL_BASE: "{{ poudriere_conf_URL_BASE }}"
  CHECK_CHANGED_OPTIONS: "{{ poudriere_conf_CHECK_CHANGED_OPTIONS }}"
  CHECK_CHANGED_DEPS: "{{ poudriere_conf_CHECK_CHANGED_DEPS }}"

# lists of packages
poudriere_pkglists: true
poudriere_pkglist_dir: "{{ poudriere_conf_dir }}/pkglist"
poudriere_pkg_arch: []

# options
poudriere_options: false

# make
poudriere_make: true
poudriere_make_file: "{{ poudriere_conf_dir }}/make.conf"
poudriere_make_conf: []

# Notes
#
# 1) A.2. FTP Sites https://docs.freebsd.org/en/books/handbook/mirrors-ftp.html
# 2) A.3.6. Subversion Mirror Sites https://docs.freebsd.org/en_US.ISO8859-1/books/handbook/svn.html#svn-mirrors


# EOF
...
